<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}">
<head >
    <meta charset="UTF-8">
    <title>PCS - Calendar</title>

    <link th:href="@{/vendor/jsgantt-improved/dist/jsgantt.css}" rel="stylesheet" type="text/css"/>
</head>
<body class="sb-nav-fixed">
<div class="container-fluid px-4" layout:fragment="content">
    <div style="position:relative" class="gantt" id="GanttChartDIV"></div>
</div>
<div th:fragment="scripts">
    <script th:src="@{/vendor/jsgantt-improved/dist/jsgantt.js}" type="text/javascript"></script>

    <script th:inline="javascript">

        let ganttData = [[${ganttData}]];
        let ganttDataJsonArray = JSON.parse(ganttData);

        console.log("ganttData = " + ganttData);

        let ganttChart = new JSGantt.GanttChart(document.getElementById('GanttChartDIV'), 'day');

        // configure ganttChart
        ganttChart.setShowRes(0);
        ganttChart.setShowDur(0);
        ganttChart.setShowComp(0);
        ganttChart.setShowStartDate(0);
        ganttChart.setShowEndDate(0);
        ganttChart.setShowPlanStartDate(0);
        ganttChart.setShowPlanEndDate(0);
        ganttChart.setShowCost(0);
        ganttChart.setShowDeps(0);

        ganttChart.setDayColWidth(22);

        ganttChart.setDayMajorDateDisplayFormat('yyyy.mon.dd');
        ganttChart.setDateTaskTableDisplayFormat('yyyy.mon.dd');

        $.each(ganttDataJsonArray, function(index, data) {
           ganttChart.AddTaskItemObject(data);
        });

        ganttChart.Draw();
    </script>
<!--    <script type="text/javascript" charset="utf8" th:src="@{/vendor/google-charts/loader.js}"></script>-->
<!--    <script type="text/javascript">-->
<!--        google.charts.load('current', {'packages':['timeline']});-->
<!--        google.charts.setOnLoadCallback(drawChart);-->

<!--        /*<![CDATA[*/-->
<!--        const timelineData = [[${#vars.myVar}]];-->
<!--        console.log('timeline data' + timelineData);-->
<!--        /*]]>*/-->
<!--        function drawChart() {-->

<!--            const container = document.getElementById('toursTimeline');-->
<!--            const chart = new google.visualization.Timeline(container);-->
<!--            const dataTable = new google.visualization.DataTable();-->

<!--            dataTable.addColumn({ type: 'string', id: 'Employee' });-->
<!--            dataTable.addColumn({ type: 'date', id: 'Start' });-->
<!--            dataTable.addColumn({ type: 'date', id: 'End' });-->

<!--            const rows = [];-->

<!--            timelineData.forEach(function(data, i) {-->
<!--               console.log(data);-->
<!--            });-->
<!--            dataTable.addRows(timelineData);-->

<!--            chart.draw(dataTable);-->
<!--        }-->
<!--    </script>-->
</div>
</body>
</html>